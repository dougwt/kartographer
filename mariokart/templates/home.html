{% extends "base.html" %}
{% load staticfiles %}

{% block head %}
<style type="text/css">
label.fb {
    margin: 0;
}
.fb > input[type=radio]{
    display:none;
}
input[type=radio] + img{
    cursor:pointer;
    border:5px solid transparent;
}
input[type=radio]:checked + img{
    border:5px solid #d65352;
}

</style>
{% endblock %}

{% block content %}
        <!-- Begin Loadouts -->
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Your kart configurations:</h3>
                </div>
                <div class="panel-body">

                    <div class="table-responsive">
                    <table class="table table-hover">

                        <!-- Header -->
                        <thead>
                            <th class="text-center">Configuration</th>
                            <th class="text-center">Speed</th>
                            <th class="text-center">Acceleration</th>
                            <th class="text-center">Weight</th>
                            <th class="text-center">Handling</th>
                            <th class="text-center">Traction</th>
                        </thead>

                        {% for config in configurations %}
                        <tr>
                            <td class="text-center">
                                <img src="http://static.mycodebytes.com/mariokart/assets/mk8/racers/{{ config.racer.file }}.png" height="64" width="64" alt="{{ config.racer.name }}">
                                <img src="http://static.mycodebytes.com/mariokart/assets/mk8/bodies/{{ config.body.file }}.png" height="64" width="100" alt="{{ config.body.name }}">
                                <img src="http://static.mycodebytes.com/mariokart/assets/mk8/tires/{{ config.tire.file }}.png" height="64" width="100" alt="{{ config.tire.name }}">
                                <img src="http://static.mycodebytes.com/mariokart/assets/mk8/gliders/{{ config.glider.file }}.png" height="64" width="100" alt="{{ config.glider.name }}">
                            </td>
                            <td class="text-center">{{ config.speed }}</td>
                            <td class="text-center">{{ config.acceleration }}</td>
                            <td class="text-center">{{ config.weight }}</td>
                            <td class="text-center">{{ config.handling }}</td>
                            <td class="text-center">{{ config.traction }}</td>
                        </tr>
                        {% endfor %}

                    </table>
                    </div>

                    <div class="text-right">
                        <button id="reset-btn" class="btn btn-default">Reset <span class="glyphicon glyphicon-trash"></span></button>
                        <button class="btn btn-danger" data-toggle="modal" data-target="#addModalDriver">Add Configuration
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>

                    <form action="">

                    <!-- Step 1: Driver Modal -->
                    <div class="modal fade" id="addModalDriver" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="myModalLabel">Step 1 of 4: <span class="hidden-xs">Please choose a driver...</span><span class="visible-xs">Driver</span></h4>
                          </div>
                          <div class="modal-body">
                                {% for item in racers %}<label class="fb fb-racer" for="fb-racer-{{ forloop.counter }}">
                                    <input id="fb-racer-{{ forloop.counter }}" type="radio" name="add-racer" value="{{ item.id }}" />
                                    <img src="{{ item.file }}" alt="{{ item.name }}" title="{{ item.name }}" class="img-rounded">
                                </label>{% endfor %}
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" id="racer-next" class="btn disabled" data-dismiss="modal" data-toggle="modal" data-target="#addModalKart">Next <span class="glyphicon glyphicon-arrow-right"></span></button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Step 2: Kart Modal -->
                    <div class="modal fade" id="addModalKart" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="myModalLabel">Step 2 of 4: <span class="hidden-xs">Please choose a kart...</span><span class="visible-xs">Kart</span></h4>
                          </div>
                          <div class="modal-body">
                                {% for item in bodies %}<label class="fb fb-body" for="fb-body-{{ forloop.counter }}">
                                    <input id="fb-body-{{ forloop.counter }}" type="radio" name="add-body" value="{{ item.id }}" />
                                    <img src="{{ item.file }}" alt="{{ item.name }}" title="{{ item.name }}" class="img-rounded">
                                </label>{% endfor %}
                          </div>
                          <div class="modal-footer">
                            <button type="button" id="body-back" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#addModalDriver"> <span class="glyphicon glyphicon-arrow-left"></span> Back</button>
                            <button type="button" id="body-next" class="btn disabled" data-dismiss="modal" data-toggle="modal" data-target="#addModalTire">Next <span class="glyphicon glyphicon-arrow-right"></span></button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Step 3: Tire Modal -->
                    <div class="modal fade" id="addModalTire" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="myModalLabel">Step 3 of 4: <span class="hidden-xs">Please choose a tire...</span><span class="visible-xs">Tire</span></h4>
                          </div>
                          <div class="modal-body">
                                {% for item in tires %}<label class="fb fb-tire" for="fb-tire-{{ forloop.counter }}">
                                    <input id="fb-tire-{{ forloop.counter }}" type="radio" name="add-tire" value="{{ item.id }}" />
                                    <img src="{{ item.file }}" alt="{{ item.name }}" title="{{ item.name }}" class="img-rounded">
                                </label>{% endfor %}
                          </div>
                          <div class="modal-footer">
                            <button type="button" id="body-back" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#addModalKart"> <span class="glyphicon glyphicon-arrow-left"></span> Back</button>
                            <button type="button" id="tire-next" class="btn disabled" data-dismiss="modal" data-toggle="modal" data-target="#addModalGlider">Next <span class="glyphicon glyphicon-arrow-right"></span></button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Step 4: Glider Modal -->
                    <div class="modal fade" id="addModalGlider" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="myModalLabel">Step 4 of 4: <span class="hidden-xs">Please choose a glider...</span><span class="visible-xs">Glider</span></h4>
                          </div>
                          <div class="modal-body">
                                {% for item in gliders %}<label class="fb fb-glider" for="fb-glider-{{ forloop.counter }}">
                                    <input id="fb-glider-{{ forloop.counter }}" type="radio" name="add-glider" value="{{ item.id }}" />
                                    <img src="{{ item.file }}" alt="{{ item.name }}" title="{{ item.name }}" class="img-rounded">
                                </label>{% endfor %}
                          </div>
                          <div class="modal-footer">
                            <button type="button" id="body-back" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#addModalTire"> <span class="glyphicon glyphicon-arrow-left"></span> Back</button>
                            <button type="submit" id="glider-next" class="btn disabled">Finish <span class="glyphicon glyphicon-flag"></span></button>
                          </div>
                        </div>
                      </div>
                    </div>

                    </form>

                </div>
            </div>
        </div>
        <!-- End Loadouts -->
{% endblock %}

{% block script %}
<script>
$( document ).ready(function() {

    $( ".choice" ).click(function() {
        $( this ).toggleClass( "chosen" );
    });

    $( "label.fb-racer" ).click(function() {
        $( "#racer-next" ).removeClass( "disabled").addClass( "btn-danger" );
    });

    $( "label.fb-body" ).click(function() {
        $( "#body-next" ).removeClass( "disabled").addClass( "btn-danger" );
    });

    $( "label.fb-tire" ).click(function() {
        $( "#tire-next" ).removeClass( "disabled").addClass( "btn-danger" );
    });

    $( "label.fb-glider" ).click(function() {
        $( "#glider-next" ).removeClass( "disabled").addClass( "btn-danger" );
    });

    $( "#reset-btn" ).click(function() {
        if (confirm('Are you sure you want to clear all your configurations?')) {
            window.location = "{% url 'reset' %}";
        }
    });

});
</script>
{% endblock %}
